@import "variables";

/** ********************************************************************************************************************
 * Globals
 */

/** ********************************************************************************************************************
 * Layout
 */

section#portfolio {
	@media (scripting: none) {
		// Hide section when scripts are not available to load content
		display: none;
	}

	> header {
		background-image:
			linear-gradient(
				$dark-overlay-color,
				$dark-overlay-color
			),
			url($image-portfolio);
		background-position: left top;
	}
	> .grid {
		display: flex;
		flex-flow: row wrap;
		justify-content: center;
		align-items: center;

		> .thumbnail {
			//flex: 1 1 auto;
		}
	}
}

/** ********************************************************************************************************************
 * Misc
 */

.thumbnail {
	min-width: 100px;
	max-width: 256px;
	min-height: 100px;
	max-height: 256px;
	height: 30vw;
	width: 30vw;
	margin: 20px;
	cursor: pointer;
	overflow: hidden;
	// TODO: Replace inline background image through attr when supported
	//background: attr(data-thumbnail url);
	background-repeat: no-repeat;
	background-position: center;
	background-size: cover;
	position: relative;
	// define this as placeholder until thumbnail loads
	//box-shadow: 0 0 -1px -2px $dark-overlay-color;
	box-shadow: 0 0 20px $dark-shadow-color;

	&::before {
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		background: $light-overlay-color;
		content: ' ';
	}
	&:hover {
		box-shadow: 0 0 30px $dark-shadow-hover-color;

		> img {
			transform: scale(1.075) translate(-50%);
		}
	}
	&:not(:hover) {
		> img {
			transform: scale(1.1) translate(-50%);
		}
	}
	&:hover::before {
		background: none;
	}

	> picture {
		position: fixed;
		background: $light-overlay-color-2;
		z-index: 999;
		text-align: center;
		justify-content: center;
		align-items: center;

		//&:not(.show) {
			display: none;
		//}
	}
	&.show > picture {
		top: 0;
		left: 0;
		height: 100vh;
		width: 100vw;
		display: flex;

		@media (orientation: portrait) {
			//transition: width 1s ease-in-out;
			source,
			img {
				width: 100vw;
				height: auto;
			}
		}

		@media (orientation: landscape) {
			//transition: height 1s ease-in-out;
			source,
			img {
				width: auto;
				height: 100vh;
			}
		}
	}
}

@supports (backdrop-filter: blur(20px)) {
	.thumbnail > picture {
		background: $acrylic-light-color;
		backdrop-filter: $acrylic-filter;
	}
}

.thumbnail picture,
.thumbnail source,
.thumbnail img {
}

.thumbnail img {
	//border: $grid solid $background-color;
	transition: transform 0.2s ease-out;
}

.thumbnail > img {
	transition: transform 0.2s ease-out;
	position: absolute;
	//top: 50%; // center image vertically in combination with transform: translate(-50%,-50%);
	left: 50%; // center image horizontally in combination with transform: translate(-50%);
	min-width: 256px;
	min-height: 256px;
	width: auto;
	height: auto;
}
